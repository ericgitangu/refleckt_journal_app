[build]
rustflags = ["-C", "link-arg=-s"]

[target.aarch64-unknown-linux-musl]
linker = "aarch64-linux-musl-gcc"
rustflags = [
  "-C", "link-self-contained=yes",
  "-C", "target-cpu=neoverse-n1"
]

[target.aarch64-unknown-linux-gnu]
# Used by cargo-lambda with Zig backend for AWS Lambda ARM64
rustflags = [
  "-C", "target-cpu=neoverse-n1"
]

[env]
# Use vendored OpenSSL for cross-compilation to ARM64
# This compiles OpenSSL from source for the target architecture
AWS_LC_SYS_STATIC = "1"
AWS_LC_SYS_VENDORED = "1"
RUSTSEC_IGNORE = "1"
